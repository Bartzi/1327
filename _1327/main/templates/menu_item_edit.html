{% extends 'base_without_sidebar.html' %}

{% load i18n %}
{% load guardian_tags %}
{% load bootstrap3 %}

{% block title %}
	{% if form.instance.pk %}
		{% trans "Edit menu item" %}
	{% else %}
		{% trans "Create menu item" %}
	{% endif %}
{% endblock %}

{% block content %}
	<form method="post" class="form-horizontal" role="form" enctype="multipart/form-data">
		{% bootstrap_form form layout='horizontal' %}
		{% csrf_token %}
		{{ formset.management_form }}
		<div class="form-group">
			<label class="col-md-2 control-label">{% trans "Permissions" %}</label>
			<div class="col-md-9">
				{% for dict in formset.errors %}
					<div class="alert alert-danger" role="alert">
					{% for error in dict.values %}
						{{ error }}
					{% endfor %}
					</div>
				{% endfor %}
				<table class="table table-striped vertically-aligned table-narrow" >
					<thead>
						{{ formset_header }}
					</thead>
					<tbody>
					{% for form in formset %}
						{{ form.as_table }}
					{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
		{% buttons %}
			<div class="col-md-offset-2 col-md-9">
				<button type="submit" class="btn btn-primary">{% trans 'Save' %}</button>
			</div>
		{% endbuttons %}
	</form>
{% endblock %}

{% block scripts %}
	{{ block.super }}
	<script type="text/javascript">
		$(document).ready(function() {
			$("#id_document,#id_parent,#id_menu_type").select2({
				language: "{{ LANGUAGE_CODE }}",
				placeholder: "{% trans "Please select..." %}",
				minimumResultsForSearch: 3
			});
		});
	</script>
{% endblock %}
